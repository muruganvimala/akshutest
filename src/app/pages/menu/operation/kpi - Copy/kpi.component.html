<!-- Start Breadcrumbs -->
<app-breadcrumbs title="Products" [breadcrumbItems]="breadCrumbItems">
  <div _ngcontent-ng-c1653861012="" class="row">
    <div _ngcontent-ng-c1653861012="" class="col-12"><div _ngcontent-ng-c1653861012="" class="page-title-box d-sm-flex align-items-center justify-content-between">
      <h4 _ngcontent-ng-c1653861012="" class="mb-sm-0">Key Performance Indicators </h4>
      <div _ngcontent-ng-c1653861012="" class="page-title-right">
        <ol _ngcontent-ng-c1653861012="" class="breadcrumb m-0">
          <li _ngcontent-ng-c1653861012="" class="breadcrumb-item active ng-star-inserted" ng-reflect-ng-class="[object Object]">Operation</li>
          <!--ng-container-->
          <li _ngcontent-ng-c1653861012="" class="breadcrumb-item active ng-star-inserted" ng-reflect-ng-class="[object Object]">KPI </li><!--ng-container--><!--bindings={
    "ng-reflect-ng-for-of": "[object Object],[object Object"
  }--></ol></div></div></div></div>
</app-breadcrumbs>
<!-- End Breadcrumbs -->



<div class="row">
    <div class="col-lg-12">
        <div class="card" id="kpiList">
          <div class="card-body">
            <div class="row align-items-center g-2">
              <div class="col-lg-3 me-auto">
                <div class="d-flex align-items-center">
                  <!-- <label>
                    <h4 _ngcontent-ng-c141272207="" class="card-title">Key Performance Indicators List
                    </h4>
                  </label> -->
                 
                  
                </div>
              </div>
    
              <div class="col-lg-auto">
                <div class="hstack flex-wrap gap-1">
                  <!-- <button class="btn btn-subtle-danger d-none" id="remove-actions"><i class="ri-delete-bin-2-line"></i></button> -->
                  
                  <div _ngcontent-ng-c141272207="" class="">
                    <div _ngcontent-ng-c141272207="" class="search-box">
                      <input _ngcontent-ng-c141272207="" type="text" placeholder="Search for KPI" class="form-control search ng-pristine ng-valid ng-touched"
                      [(ngModel)]="searchTerm" (keyup)="onSearchKeyUp(searchTerm)" >
                      <i _ngcontent-ng-c141272207="" class="ri-search-line search-icon"></i>
                    </div>
                  </div>
                  
                  <button [hidden]="!menucanadd" name="{{menucanadd}}" type="button" class="btn btn-primary add-btn" (click)="openModal()"><i class="bi bi-plus-circle align-baseline me-1"></i> Add
                    KPI</button>
                    <button type="button" class="btn btn-info me-1" (click)="openEnd()"><i class="bi bi-funnel align-baseline me-1"></i> Filter</button>
                  <div>
                    <div dropdown class="btn-group">
                      <button
                        dropdownToggle
                        class="btn btn-success me-1"
                        type="button"
                        id="dropdownMenuButton"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        <i class="ph-cloud-arrow-up align-middle me-1"></i>
                        Export
                      </button>
                      <ul
                        *dropdownMenu
                        class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start"
                        aria-labelledby="dropdownMenuButton"
                      >
                        <li>
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="exportToExcel()"
                          >
                            <i class="bi bi-filetype-xls fs-4 me-1"></i>
                            <span>EXCEL</span>
                          </button>
                        </li>
                        <li class="mt-1">
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="exportToCsv()"
                          >
                            <i class="bi bi-filetype-csv fs-4 me-1"></i>
                            <span>CSV</span>
                          </button>
                        </li>
                        <li class="mt-1">
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="exportToPDF()"
                            >
                            <i class="bi bi-filetype-pdf fs-4 me-1"></i>
                            <span>PDF</span>
                          </button>
                        </li>
                        <li class="mt-1">
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="exportToExcelAll()"
                            >
                            <i class="bi bi-filetype-pdf fs-4 me-1"></i>
                            <span>EXCEL All</span>
                          </button>
                        </li>
                        <li class="mt-1">
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="exportToCsvAll()"
                            >
                            <i class="bi bi-filetype-pdf fs-4 me-1"></i>
                            <span>CSV All</span>
                          </button>
                        </li>
                        
                      </ul>
                    </div>
                   
                    <div dropdown class="btn-group" [hidden]="!menucanupdate && !menucandelete">

                     
                      <button 
                        dropdownToggle
                        class="btn btn-primary me-1"
                        type="button"
                        id="dropdownMenuButton"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        [class.disabled]="!areMultipleRowsSelected()"
                      >
                      <i  class="bi bi-three-dots-vertical"></i>
                      </button>
                      <ul
                        *dropdownMenu
                        class="dropdown-menu"
                        aria-labelledby="dropdownMenuButton"
                      >
                        
                        <li [hidden]="!menucanupdate" class="mt-1">
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="editList()"
                            [disabled]="!isSingleRowSelected()"
                          >
                            <i class="bi bi-pencil-square"></i> Edit
                          </button>
                        </li>
                        <li [hidden]="!menucandelete"  class="mt-1">
                          <button
                            class="dropdown-item btn-link"
                            type="button"
                            (click)="deleteRecordModal.show()"
                            [disabled]="!isSingleRowSelected()"
                          >
                            <i class="bi bi-trash"></i> Delete
                          </button>
                        </li>
                       
                      </ul>
                    </div>
                    <div
                      dropdown
                      class="btn-group me-1"
                      (click)="onDropdownClick($event)"
                    >
                      <button
                        dropdownToggle
                        type="button"
                        class="btn btn-subtle-danger"
                        data-bs-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <i class="mdi mdi-cog-outline text-muted fs-lg align-middle me-1"></i> 
                      </button>
                      <div
                        *dropdownMenu
                        class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start p-2"
                        (click)="onDropdownMenuClick($event)"
                      >
                        <label
                          *ngFor="let item of columnDefinitions"
                          class="dropdown-item"
                        >
                          <input
                            type="checkbox"
                            [(ngModel)]="item.visible"
                            (click)="onColumnToggleChange(item)"
                            [disabled]="item.disableHide"
                          />
                          {{ item.label }}
                        </label>
                      </div>
                    </div>
                    
                    
                    <!-- <button
                      type="button"
                      class="btn btn-subtle-danger"
                      (click)="resetTableFilterAndPagination()"
                    >
                      <i class="ph ph-arrows-counter-clockwise"></i>
                    </button> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div class="card-body">
            <div class="table-responsive table-card table-container">
              <table
                class="table table-centered align-middle table-custom-effect table-nowrap mb-0"
              >
                <thead class="text-muted">
                  <tr>
                    <th>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          [(ngModel)]="masterSelected"
                          (change)="checkUncheckAll($event)"
                        />
                        <label class="form-check-label"></label>
                      </div>
                    </th>
                    <ng-container *ngFor="let column of columnDefinitions">
                      <th
                        class="sort cursor-pointer"
                        [ngClass]="{ 'sort cursor-pointer': column.sortable }"
                        *ngIf="column.visible"
                        (click)="sort(column.def)"
                      >

                      <span class="col-sm-auto"> {{ column.label }} </span>
                        
                        <span *ngIf="column.sortable">
                          <!-- <i
                            class="bi"
                            [ngClass]="{
                              'bi-arrow-down-up': column.sortable,
                              'bi-arrow-up':
                                currentSortColumn === column.def && isSortAscending,
                              'bi-arrow-down':
                                currentSortColumn === column.def && !isSortAscending
                            }"
                          ></i> -->
                        </span>
                        <div
                          class="input-group input-group-sm"
                          style="width: 100px"
                          *ngIf="column.filterable"
                        >
                          <!-- <input
                            type="text"
                            class="form-control"
                            aria-label="Sizing example input"
                            aria-describedby="inputGroup-sizing-sm"
                            placeholder="Filter"
                            [formControl]="column.filter"
                            (click)="$event.stopPropagation()"
                          />
                          <span class="input-group-text" id="inputGroup-sizing-sm"
                            ><i class="bi bi-funnel"></i
                          ></span> -->
                        </div>
                      </th>
                    </ng-container>
                  </tr>
                </thead>
                <tbody class="list form-check-all">
                  <tr
                    *ngFor="let row of filteredItems()"
                    [class.selected-row]="row.isSelected"
                    (click)="handleRowClick($event, row)"
                  >
                    <td>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          [(ngModel)]="row.state"
                          [checked]="row.isSelected"
                          (change)="onCheckboxChange($event, row)"
                        />
                        <label class="form-check-label"></label>
                      </div>
                    </td>
                    <ng-container *ngFor="let column of columnDefinitions">
                      <td *ngIf="column.isLink && column.visible">
                        <a class="fw-medium link-primary" [routerLink]="['/purchase/consignment/edit/', row[column?.id]]">{{
                          row[column.def]
                        }}</a>
                      </td>
                      <!-- For non-link columns -->
                      <td *ngIf="!column.isLink && column.visible">{{ row[column.def] }}</td>
                    </ng-container>
                  </tr>
                </tbody>
              </table>
              <div
                class="noresult"
                [ngClass]="dataSource?.length != 0 ? 'd-none' : ''"
              >
                <div class="text-center py-4">
                  <i class="ph-magnifying-glass fs-1 text-primary"></i>
                  <h5 class="mt-2">Sorry! No Result Found</h5>
                  <p class="text-muted mb-0">
                    We've searched more than {{ dataSource?.length }}+ Records, We
                    did not find any Records for you search.
                  </p>
                </div>
              </div>
            </div>
            <div id="elmLoader" *ngIf="isLoading">
              <div class="spinner-border text-primary avatar-sm" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
            <div
              [ngClass]="dataSource?.length === 0 ? 'd-none' : ''"
              class="row align-items-center mt-4 pt-2"
              id="pagination-element"
            >
            <div class="col-sm-auto" style="padding-bottom: 13px;">
              <div class="text-muted text-center text-sm-start pe-auto">
                Per Page:
              </div>
            </div>
            <div class="col-sm-auto" style="padding-bottom: 13px;">
              <select
                    class="form-select w-auto"
                    id="perPage"
                    [(ngModel)]="itemsPerPage"
                    (change)="onPerPageChange()"
                  >
                    <option *ngFor="let option of perPageOptions" [value]="option">
                      {{ option }}
                    </option>
                  </select>
            </div>
              <div class="col-sm" style="padding-bottom: 13px;">
                <div class="text-muted text-center text-sm-start">
                  Showing <span class="fw-semibold">{{ endIndex }}</span> of
                  <span class="fw-semibold">{{ totalRecords }}</span> Results
                </div>
              </div>
              <div class="col-sm-auto mt-3 mt-sm-0">
                <pagination
                  class="pagination-wrap hstack gap-2 justify-content-center"
                  [totalItems]="totalRecords"
                  [itemsPerPage]="itemsPerPage"
                  [boundaryLinks]="true"
                  [directionLinks]="true"
                  [maxSize]="5"
                  [(ngModel)]="currentPage"
                  name="currentPage"
                  (pageChanged)="onPageChange(currentPage)"
                  
                ></pagination>
              </div>
            </div>
          </div>
        
    </div>

</div>
</div>


<div class="modal fade" bsModal #showModal="bs-modal">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header px-4 pt-4">
                <h5 class="modal-title" id="exampleModalLabel">KPI Form</h5>
                <button type="button" class="btn-close" (click)="closemodal()"></button>
            </div>

            <form (ngSubmit)="saveProduct()" [formGroup]="productForm" class="row g-3 needs-validation" novalidate autocomplete="off">
                <div class="modal-body p-4">
                    <div id="alert-error-msg" class="d-none alert alert-danger py-2"></div>
                    <input type="hidden" id="id-field">

                    <input type="hidden" id="order-field">
                    <input type="hidden" id="rating-field">
                    <input type="hidden" id="discount-field">

           <div class="row">

            <div class="mb-3 col-xl-4 col-sm-12">
                <label class="form-label">Publishers</label>
                <select class="form-select" [disabled]="isEditMode" [(ngModel)]="publisherId"
                value="{{publisherId}}" formControlName="Publisher" aria-label="Default select example"
                (change)="formBasedOnPublisher(publisherId)"  [ngClass]="{'is-invalid': formsubmit && form['Publisher'].errors}" required>
                    <option value="" selected>Publishers</option>
                    <option *ngFor="let pub of publisherList" [value]="pub.id">{{pub.acronym}}
                  </select>
                  <div *ngIf="formsubmit && form['Publisher'].errors" class="invalid-feedback">
                    Please select publisher.
                </div>
                
                  
            </div>
            <div class="mb-3 col-xl-4 col-sm-12">
                <label class="form-label">Select Month</label>
                <div class="input-group mb-3">
                  <input type="text" [(ngModel)]="modelDate" autocomplete="off" class="form-control" bsDatepicker
                  [bsConfig]="{ containerClass :colorTheme }" id="datetimepicker2" formControlName="MonthYear"
                  [bsConfig]="{dateInputFormat: 'MMM YYYY'}" (onShown)="onOpenCalendar($event)" >
  
                  <span class="input-group-text" id="form_input_group"><i class="ri-calculator-line"></i></span>

                  <div *ngIf="formsubmit && form['MonthYear'].errors" class="invalid-feedback">
                    Please select month year .
                </div>
                </div>
                
               
                <!-- <input [(ngModel)]="modelDate" autocomplete="off" class="form-control" name="date" 
                bsDatepicker [bsConfig]="{dateInputFormat: 'MM/YYYY'}"
                 (onShown)="onOpenCalendar($event)"> -->

                <!-- <input type="text" class="form-control flatpickr-input" formControlName="MonthYear" [disabled]="isEditMode" 
                 mwlFlatpickr [altInput]="true" [convertModelValue]="true" altFormat="M Y" dateFormat="M Y"
                 [ngClass]="{'is-invalid': formsubmit && form['MonthYear'].errors}" required  onshow="onOpenCalendar($event)"  > -->

               
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="overallPerformance">
              <div >
                <label class="form-label">Overall Performance</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="OverallPerformance" class="form-control" 
                    value="0" placeholder="Overall Performance" aria-label="Overall Performance" aria-describedby="form_input_group"
                   >
                    <span class="input-group-text" id="form_input_group">%</span>

                    <!-- <div *ngIf="formsubmit && form['OverallPerformance'].errors" class="invalid-feedback">
                      Please enter overall performance
                  </div> -->
                </div>

              </div>
                
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="schedule">
              <div >
                <label class="form-label">Schedule</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="Schedule" class="form-control" 
                    value="0" placeholder="Schedule" aria-label="Schedule" aria-describedby="form_input_group"
                    >
                    <span class="input-group-text" id="form_input_group">%</span>
                    <!-- <div *ngIf="formsubmit && form['Schedule'].errors" class="invalid-feedback">
                      Please enter schedule
                  </div> -->
                </div>
              </div>
                
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="quality">
              <div >
                <label class="form-label">Quality</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="Quality" class="form-control" value="0" 
                    placeholder="Quality" aria-label="Quality" aria-describedby="form_input_group"
                    >
                    <span class="input-group-text" id="form_input_group">%</span>
                    <!-- <div *ngIf="formsubmit && form['Quality'].errors" class="invalid-feedback">
                      Please enter quality
                  </div> -->
                </div>
              </div>
               
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="communication">
              <div >
                <label class="form-label">Communication</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="Communication" class="form-control" 
                    value="0" placeholder="Communication" aria-label="Communication" aria-describedby="form_input_group"
                    >
                    <span class="input-group-text" id="form_input_group">%</span>
                    <!-- <div *ngIf="formsubmit && form['Communication'].errors" class="invalid-feedback">
                      Please enter communication
                  </div> -->
                </div>

              </div>
                
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="customerSatisfaction">
              <div >
                <label class="form-label">Customer Satisfaction</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="CustomerSatisfaction" class="form-control" value="0" 
                    placeholder="Customer Satisfaction" aria-label="Customer Satisfaction" aria-describedby="form_input_group"
                    >
                    <span class="input-group-text" id="form_input_group">%</span>
                    <!-- <div *ngIf="formsubmit && form['CustomerSatisfaction'].errors" class="invalid-feedback">
                      Please enter customer satisfaction
                  </div> -->
                </div>
              </div>
               
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="accountManagement">
              <div >
                <label class="form-label">Account Management</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="AccountManagement" class="form-control" 
                    value="0" placeholder="Account Management" aria-label="Account Management" aria-describedby="form_input_group"
                    >
                    <span class="input-group-text" id="form_input_group">%</span>
                    <!-- <div *ngIf="formsubmit && form['AccountManagement'].errors" class="invalid-feedback">
                      Please enter account management
                  </div> -->
                </div>
              </div>
               
            </div>
            <div class="mb-3 col-xl-4 col-sm-12" id="rft">
              <div >
                <label class="form-label">RFT</label>
                <div class="input-group mb-3">
                    <input type="text" formControlName="RFT" class="form-control" value="0" placeholder="RFT" 
                    aria-label="RFT" aria-describedby="form_input_group"
                    >
                    <span class="input-group-text" id="form_input_group">%</span>
                    <!-- <div *ngIf="formsubmit && form['RFT'].errors" class="invalid-feedback">
                      Please enter RFT
                  </div> -->
                </div>
              </div>
               
            </div>
            <div class="mb-3 col-xl-4 col-sm-12"  id="publicationSpeed">
              <div >
                <label class="form-label">Publication Speed</label>
                <input class="form-control" formControlName="PublicationSpeed" type="text" name="name" 
                value="0" placeholder="Publication Speed" 
                />
              </div>
               
                <!-- <div *ngIf="formsubmit && form['PublicationSpeed'].errors" class="invalid-feedback">
                  Please enter publication speed
              </div> -->
            </div>
            <div class="mb-3 col-xl-4 col-sm-12"  id="feedback">
              <div >
                <label class="form-label">Feedback</label>
                <input class="form-control" formControlName="Feedback" type="text"
                 name="name" value="0" placeholder="Feedback"
                 />
              </div>
               
                 <!-- <div *ngIf="formsubmit && form['Feedback'].errors" class="invalid-feedback">
                  Please enter feedback
              </div> -->
            </div>
           
            <div class="mb-3 col-xl-4 col-sm-12" id="authorsatisfication">
              <div >
                <label class="form-label">Author Satisfaction</label>
                <input class="form-control" formControlName="AuthorSatisfaction" 
                type="text" name="name" value="0" placeholder="Author Satisfaction"
                />
              </div>
               

                <!-- <div *ngIf="formsubmit && form['AuthorSatisfaction'].errors" class="invalid-feedback">
                  Please enter author satisfaction
              </div> -->
            </div>
           </div>

                </div>
                <div class="modal-footer">
                    <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-ghost-danger" (click)="closemodal()"><i class="bi bi-x-lg align-baseline me-1"></i> Close</button>
                        <button type="submit" class="btn btn-primary" id="add-btn">Submit</button>
                    </div>
                </div>
            </form>
        </div>
        <!-- modal-content -->
    </div>
    <!-- modal-dialog -->
</div>
<!-- modal -->

<!-- deleteRecordModal -->
<div id="deleteRecordModal" class="modal fade zoomIn" bsModal #deleteRecordModal="bs-modal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" id="deleteRecord-close" (click)="deleteRecordModal.hide()"></button>
            </div>
            <div class="modal-body p-md-5">
                <div class="text-center">
                    <div class="text-danger">
                        <i class="bi bi-trash display-4"></i>
                    </div>
                    <div class="mt-4">
                        <h3 class="mb-2">Are you sure ?</h3>
                        <p class="text-muted fs-lg mx-3 mb-0">Are you sure you want to remove this record ?</p>
                    </div>
                </div>
                <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                    <button type="button" class="btn w-sm btn-light btn-hover" (click)="deleteRecordModal.hide()">Close</button>
                    <button type="button" class="btn w-sm btn-danger btn-hover" id="delete-record" (click)="confirmDelete()">Yes, Delete It!</button>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /deleteRecordModal -->


<div class="custom-offcanvas" id="courseFilters">
  <div class="offcanvas-header border-bottom p-3">
      <h5 class="offcanvas-title" id="courseFiltersLabel">KPI Filters</h5>
      <button type="button" style="padding-left: 270px;" class="btn-close" (click)="closeoffcanvas()"></button>
  </div>
  <div class="offcanvas-body">
      <form action="#!">
          <div class="row">
              <div class="col-lg-12">
                  <div class="mb-3">
                      <label class="select-category-filter form-label fs-md mb-3 text-decoration-underline">Publisher</label>
                      <div class="formCost d-flex gap-2 align-items-center">
<!--                        
                        <ng-select [items]="publisherList" [multiple]="true" bindLabel="acronym" bindValue="acronym"
                                        >
                                        <ng-template ng-optgroup-tmp let-item="item">
                                            {{item.country || 'Unnamed group'}}
                                        </ng-template>
                                    </ng-select> -->

                                    <!-- <ng-select id="PubFilter" [items]="publisherList" [multiple]="true" bindLabel="acronym" bindValue="acronym"
                                    [(ngModel)]="selectedPublisher" [clearable]="false">
                                    <ng-template ng-optgroup-tmp let-item="item">
                                        {{item.country || 'Unnamed group'}}
                                    </ng-template>
                                </ng-select>            -->
                        <select id="PubFilter" class="form-select" multiple="true"  >
                          <option value="">All</option>
                          <option *ngFor="let pub of publisherList" [value]="pub.acronym">{{pub.acronym}}
                          </option>
                        </select>

                        
                       
                        <!-- <select class="form-select" id="PubFilter"
                        value="{{publisherId}}"  aria-label="Default select example"
                         >
                        
                            <option value="" selected>Publishers</option>
                            <option *ngFor="let pub of publisherList" [value]="pub.publisherName">{{pub.publisherName}}
                          </select> -->
                      </div>
                  </div>
              </div>

              <div class="col-lg-12">
                <div class="mb-3">
                    <label class="select-category-filter form-label fs-md mb-3 text-decoration-underline">Year</label>
                    <div class="formCost d-flex gap-2 align-items-center">
                     
                     
                      <!-- <input type="text" class="form-control flatpickr-input"  id="yearFilter"
                      mwlFlatpickr [altInput]="true" [convertModelValue]="true" altFormat="Y" dateFormat="Y"
                      > -->
                      <input  autocomplete="off"  id="yearFilter" class="form-control" name="date" bsDatepicker
                     [bsConfig]="{dateInputFormat: 'YYYY', adaptivePosition: true}" (onShown)="onOpenCalendarYear($event)">
                      <span class="input-group-text" id="form_input_group"><i class="ri-calculator-line"></i></span>

     
                    </div>
                </div>
            </div>

            <div class="col-lg-12">
              <div class="mb-3">
                  <label class="select-category-filter form-label fs-md mb-3 text-decoration-underline">Month Year</label>
                  <div class="formCost d-flex gap-2 align-items-center">
                    <!-- <input type="text" class="form-control flatpickr-input"   id="filterMonthYear"
                    mwlFlatpickr [altInput]="true" [convertModelValue]="true" altFormat="M Y" dateFormat="M Y"
                    > -->

                    <input  autocomplete="off"  id="filterMonthYear" class="form-control" name="filterMonthYear" bsDatepicker
                     [bsConfig]="{dateInputFormat: 'MMM YYYY', adaptivePosition: true}" (onShown)="onOpenCalendar($event)">
                    <span class="input-group-text" id="form_input_group"><i class="ri-calculator-line"></i></span>

                  </div>
              </div>
          </div>
              

          <div class="col-lg-12">
            <div class="mb-3">
                <label class="select-category-filter form-label fs-md mb-3 text-decoration-underline">Start Date- End Date</label>
                <div class="formCost d-flex gap-2 align-items-center">
                  <!-- <input [(ngModel)]="modelDate" autocomplete="off" class="form-control flatpickr-input"  
                  mwlFlatpickr [altInput]="true" [convertModelValue]="true" altFormat="M Y" dateFormat="M Y"
                  id="startDate" (onShown)="onOpenCalendar($event)" > -->

                  <input  autocomplete="off"  id="startDate" class="form-control flatpickr-input" name="startDate" bsDatepicker
                  [bsConfig]="{dateInputFormat: 'MMM YYYY', adaptivePosition: true}" (onShown)="onOpenCalendar($event)">
                  <span class="input-group-text" id="form_input_group"><i class="ri-calculator-line"></i></span>
                  <input  autocomplete="off"  id="endDate" class="form-control flatpickr-input" name="endDate" bsDatepicker
                  [bsConfig]="{dateInputFormat: 'MMM YYYY', adaptivePosition: true}" (onShown)="onOpenCalendar($event)">
                  <!-- <input type="text" class="form-control flatpickr-input"  id="endDate" 
                  mwlFlatpickr [altInput]="true" [convertModelValue]="true" altFormat="M Y" dateFormat="M Y"
                  > -->
                </div>
            </div>
        </div>
          </div>
      </form>
  </div>
  <div class="offcanvas-header htsack gap-2 border-top p-3">
      <button class="btn btn-subtle-danger w-100" (click)="resetFilter()"><i class="bi bi-x-lg align-baseline me-1"></i> Reset</button>
      <button class="btn btn-secondary w-100" (click)="submitFilter()"><i class="bi bi-funnel align-baseline me-1"></i> Filters</button>
  </div>
</div>

<div class="offcanvas-backdrop fade backdrop3" id="backdrop" (click)="closeoffcanvas()"></div>

<div class="modal " id="loaderAnimation">
  <div class="modal-dialog" role="document" style=" display: flex; justify-content: center; align-items: center;">
      <div class="modal-content card" style="background-color: transparent !important;">

          <div class="h-100 p-4  d-flex justify-content-center align-items-center flex-column">

              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  style="margin: auto; background: rgba(255, 255, 255, 0); display: block;" width="203px"
                  height="203px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                  <circle cx="50" cy="50" r="0" fill="none" stroke="#e90c59" stroke-width="4">
                      <animate attributeName="r" repeatCount="indefinite" dur="3.571428571428571s" values="0;40"
                          keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"></animate>
                      <animate attributeName="opacity" repeatCount="indefinite" dur="3.571428571428571s" values="1;0"
                          keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"></animate>
                  </circle>
                  <circle cx="50" cy="50" r="0" fill="none" stroke="#46dff0" stroke-width="4">
                      <animate attributeName="r" repeatCount="indefinite" dur="3.571428571428571s" values="0;40"
                          keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-1.7857142857142856s">
                      </animate>
                      <animate attributeName="opacity" repeatCount="indefinite" dur="3.571428571428571s" values="1;0"
                          keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-1.7857142857142856s">
                      </animate>
                  </circle>
              </svg>

              <h3>Loading</h3>

          </div>
      </div>
  </div>

</div>

<script>

$(function() {
  // $('#datetimepicker2').datetimepicker({
  //   viewMode: 'months',
  //   format: 'YYYY-MM'
  // });

  // $('#datetimepicker2').datepicker( {
  //       changeMonth: true,
  //       changeYear: true,
  //       showButtonPanel: true,
  //       dateFormat: 'MM yy',
  //       onClose: function(dateText, inst) { 
  //           var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
  //           var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
  //           $(this).datepicker('setDate', new Date(year, month, 1));
  //       }
  //   });
});
</script>

<style>
  /* .ui-datepicker-calendar {
    display: none;
    } */
</style>